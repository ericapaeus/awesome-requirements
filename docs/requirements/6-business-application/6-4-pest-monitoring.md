# 测防数据采集

<a href="/diagrams/prototype/6-4-pest-monitoring.html" target="_blank" rel="noopener noreferrer">查看界面原型</a>

### 功能定义

测防数据采集是面向基层植保工作人员的移动端数据采集功能，支持病虫情发生上报、监测数据采集和防控数据采集三大类数据的采集工作。该功能通过移动终端实现病虫害发生和防控数据的快速采集、实时上报，为病虫害监测预警和科学防控提供数据支撑。

### 流程与逻辑

1. 病虫情发生上报流程
   - 选择病虫情发生上报功能
   - 填写基本信息（作物、病虫害种类、发生地点等）
   - 填写发生信息（发生面积、危害程度、损失程度等）
   - 上传现场照片或视频
   - 填写防控建议
   - 提交上报信息
   - 系统自动通知相关人员

2. 监测数据采集流程
   - 选择监测数据采集功能
   - 选择监测对象（作物和病虫害）
   - 填写监测点信息（经纬度、地址等）
   - 记录监测指标数据（虫口密度、病害发病率等）
   - 上传监测现场照片
   - 提交监测数据
   - 系统进行数据校验

3. 防控数据采集流程
   - 选择防控数据采集功能
   - 关联监测记录或发生记录
   - 填写防控信息（防控方式、防控面积等）
   - 记录用药信息（农药名称、用量等）
   - 填写防控效果评估
   - 上传防控现场照片
   - 提交防控数据

4. 数据审核流程
   - 上级单位接收数据
   - 审核数据完整性和准确性
   - 选择审核结果（通过/退回）
   - 填写审核意见
   - 通知采集人员审核结果

5. 异常处理机制
   - 网络异常：支持离线采集，恢复网络后自动同步
   - 定位失败：支持手动输入地理位置信息
   - 照片上传失败：自动重试，支持压缩上传
   - 数据校验失败：提示具体错误原因，支持修正

### 数据项

1. 输入数据项

| 编号 | 交互对象 | 输入项 | 定义 | 数据类型 |
|------|----------|--------|------|----------|
| 1 | 采集人员 | 作物种类 | 受害作物的种类 | 枚举 |
| 2 | 采集人员 | 病虫害种类 | 发生的病虫害种类 | 枚举 |
| 3 | 采集人员 | 发生地点 | 病虫害发生的具体位置 | 地理坐标 |
| 4 | 采集人员 | 发生面积 | 病虫害发生的面积 | 数值 |
| 5 | 采集人员 | 危害程度 | 病虫害的危害严重程度 | 枚举 |
| 6 | 采集人员 | 监测指标 | 各类监测数据指标 | 数值 |
| 7 | 采集人员 | 防控方式 | 采用的防控措施 | 多选列表 |
| 8 | 采集人员 | 用药信息 | 使用的农药及用量 | 对象 |
| 9 | 采集人员 | 现场照片 | 病虫害现场照片 | 图片文件 |
| 10 | 审核人员 | 审核结果 | 数据审核的结果 | 枚举 |

2. 输出数据项

| 编号 | 交互对象 | 输出项 | 定义 | 数据类型 |
|------|----------|--------|------|----------|
| 1 | 采集人员 | 采集记录 | 已采集的数据记录 | 列表 |
| 2 | 采集人员 | 采集统计 | 采集数据的统计信息 | 对象 |
| 3 | 审核人员 | 待审核数据 | 需要审核的数据列表 | 列表 |
| 4 | 系统 | 数据状态 | 采集数据的当前状态 | 枚举 |
| 5 | 系统 | 校验结果 | 数据校验的结果 | 布尔值 |

3. 必填项说明
- 作物种类：必填，从预设列表中选择
- 病虫害种类：必填，从预设列表中选择
- 发生地点：必填，支持GPS自动定位或手动输入
- 发生面积：必填，单位为亩，精确到小数点后2位
- 危害程度：必填，分为轻、中、重三级
- 监测指标：根据不同病虫害类型有不同的必填项
- 现场照片：必须上传至少1张照片

4. 数据规则和约束
- 照片大小：单张不超过10MB，每次上传总量不超过50MB
- 照片格式：支持jpg、png、gif等常用格式
- 面积数据：不得小于0，且必须为有效数值
- 时间数据：不得晚于当前时间
- 经纬度：必须在安徽省行政区域范围内

### 用户访问权限

1. 系统管理员
   - 管理数据字典
   - 设置数据规则
   - 管理用户权限
   - 查看系统日志

2. 省级用户
   - 查看全省数据
   - 审核下级数据
   - 导出统计报表
   - 管理数据规则

3. 市级用户
   - 查看本市数据
   - 审核下级数据
   - 导出本市报表
   - 管理本级数据

4. 县级用户
   - 采集本地数据
   - 查看本县数据
   - 管理本级数据
   - 导出本县报表

### 界面设计

1. 主界面布局
   - 顶部：功能导航区
   - 中部：三大功能入口
   - 下部：最近采集记录

2. 功能入口区域
   - 病虫情发生上报卡片
   - 监测数据采集卡片
   - 防控数据采集卡片

3. 数据列表区域
   - 采集类型标签
   - 采集内容概述
   - 采集地点信息
   - 采集时间显示
   - 数据状态标识
   - 操作按钮组

4. 筛选条件区域
   - 数据类型选择
   - 时间范围选择
   - 筛选按钮

5. 交互方式
   - 点击功能卡片进入对应采集界面
   - 下拉刷新数据列表
   - 左右滑动查看更多操作
   - 支持离线缓存
   - 自动定位功能

### 招标文件中的原文信息

> 建设移动端测报采集功能，支持病虫情发生上报、监测数据采集和防控数据采集三大类数据的采集工作。通过移动终端实现病虫害发生和防控数据的快速采集、实时上报，为病虫害监测预警和科学防控提供数据支撑。 