# 8.2 物联网设备总览一张图

<a href="/diagrams/prototype/8-2-iot-overview-map.html" target="_blank" rel="noopener noreferrer">查看界面原型</a>

### 功能定义
物联网设备总览一张图是一个基于GIS技术的物联网设备监控和管理系统，用于实时展示和监控全省范围内的物联网设备建设情况。该功能通过地图可视化展示物联网设备的分布情况，并提供设备建设情况统计、设备类型统计、数据量变化趋势和厂商情况统计等多维度的数据分析功能，为物联网设备管理和决策提供数据支持。

### 流程与逻辑

#### 物联网建设情况地图
1. 数据采集与更新
   - 系统自动从数据库获取物联网设备的位置和状态信息
   - 数据包括设备ID、设备类型、所属区县、运行状态等
   - 数据更新频率为实时更新

2. 数据处理流程
   - 按建设项目和建设年份对设备进行分类
   - 统计各市县的设备分布情况
   - 生成设备分布热力图

3. 展示逻辑
   - 在地图上展示设备分布点位
   - 支持按建设项目、建设年份筛选显示
   - 点击设备点位可查看详细信息

#### 物联网建设情况统计
1. 数据处理流程
   - 统计设备分布区县数量
   - 统计监测点数量
   - 统计设备总数量

2. 展示逻辑
   - 以数字卡片形式展示统计数据
   - 支持数据导出功能
   - 显示同比增长率

#### 设备类型统计
1. 数据处理流程
   - 按设备类型统计设备数量
   - 统计各类型设备的异常数量
   - 统计各类型设备的监测指标数量
   - 统计各类型设备的年度数据采集量

2. 展示逻辑
   - 以表格形式展示统计数据
   - 支持按设备类型筛选
   - 异常设备数量突出显示

#### 设备数据量变化趋势
1. 数据处理流程
   - 统计各类型设备的每日数据量
   - 生成时间序列数据
   - 计算数据量变化趋势

2. 展示逻辑
   - 以折线图形式展示趋势
   - 支持选择时间范围
   - 支持多设备类型对比

#### 厂商情况统计
1. 数据处理流程
   - 统计各厂商的设备分布情况
   - 统计各厂商的异常设备数量
   - 计算设备正常率

2. 展示逻辑
   - 以表格形式展示统计数据
   - 支持按厂商筛选
   - 支持导出统计报表

### 数据项

#### 输入数据项
| 编号 | 交互对象 | 输入项 | 定义 | 数据类型 |
|------|----------|--------|------|----------|
| I1 | 数据库 | 设备基本信息 | 设备ID、类型、位置等基本信息 | Object |
| I2 | 数据库 | 设备运行状态 | 设备在线状态、异常状态等 | Object |
| I3 | 数据库 | 设备数据量 | 设备采集的数据量统计 | Number |
| I4 | 数据库 | 厂商信息 | 设备所属厂商信息 | Object |
| I5 | 数据库 | 行政区划 | 设备所在行政区划信息 | Object |

#### 输出数据项
| 编号 | 交互对象 | 输出项 | 定义 | 数据类型 |
|------|----------|--------|------|----------|
| O1 | 界面 | 设备分布图 | 设备在地图上的分布情况 | GeoJSON |
| O2 | 界面 | 建设统计 | 设备建设情况统计数据 | Object |
| O3 | 界面 | 类型统计 | 各类型设备统计数据 | Array |
| O4 | 界面 | 数据趋势 | 数据量变化趋势图表 | Array |
| O5 | 界面 | 厂商统计 | 各厂商设备统计数据 | Array |

### 用户访问权限
- 省级管理员：具有查看所有数据的权限
- 市级用户：仅能查看本市及下辖区县的设备数据
- 县级用户：仅能查看本县的设备数据
- 设备厂商：仅能查看本厂商的设备数据
- 普通用户：具有查看权限，无数据维护权限

### 界面设计
1. 总体布局
   - 顶部：功能切换导航栏和时间筛选器
   - 左侧：统计数据展示区
   - 中部：地图展示区
   - 右侧：趋势图表展示区

2. 主要操作区域
   - 时间范围选择器
   - 设备类型筛选器
   - 厂商筛选器
   - 地图操作控件
   - 数据导出按钮

3. 数据展示形式
   - 设备分布：地图点位标注
   - 统计数据：数字卡片
   - 类型统计：表格
   - 趋势数据：折线图
   - 厂商统计：表格

4. 交互方式
   - 鼠标悬停显示设备详情
   - 点击设备点位查看详细信息
   - 地图支持缩放和平移
   - 图表支持数据筛选
   - 表格支持排序和筛选

### 招标文件中的原文信息

> 展示全省物联网的建设情况，可以通过地图进行下钻到市级视图查看某市的物联网建设情况，主要展示内容包括：
> 
> （1）物联网建设情况地图：支持按建设项目、建设年份在地图上展示各市县物联网建设情况，数据内容包括：地市名称、建设区县个数、物联网设备数量；
> 
> （2）物联网建设情况统计：展示全省物联网的建设统计数据，包括：设备分布区县个数、监测点个数、设备数量；
> 
> （3）设备类型统计：按照设备类型统计全省物联网建设情况，包括：设备类型名称、设备数量、异常设备数量、监测指标数量、今年采集数据量；
> 
> （4）设备数据量变化趋势：展示某一类型设备的按天数据量变化趋势；
> 
> （5）厂商情况统计：按照承建厂商统计全省物联网建设情况，包括：厂商名称、分布市县个数、设备数量、异常设备数量。 